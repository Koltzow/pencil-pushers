define(function(){var t={_x:0,_y:0,x:0,y:0,centered:!1,target:null,focusTarget:null,focusDelay:30};return t.update=function(){if(null!==this.focusTarget){if(this._x-=.1*(this._x-this.focusTarget.x),this._y-=.1*(this._y-this.focusTarget.y),this.x=Math.round(this._x),this.y=Math.round(this._y),Math.round(this._x)===this.focusTarget.x&&Math.round(this._y)===this.focusTarget.y){if(this.focusDelay>0)return void this.focusDelay--;this.focusTarget=null}}else if(null!==this.target)if(this.target instanceof Array&&1===EXP.engine.players)this._x-=.1*(this._x-0),this._y-=.1*(this._y-0),this.x=Math.round(this._x),this.y=Math.round(this._y);else if(this.target instanceof Array&&EXP.engine.players>1){for(var t=0,i=0,h=0,s=0;s<this.target.length;s++)null!==this.target[s].player&&this.target[s].player instanceof Object&&(t+=this.target[s].player.x+this.target[s].player.width/2,i+=this.target[s].player.y+this.target[s].player.height/2,h++);t=Math.round(t/h),i=Math.round(i/h),this._x-=.1*(this._x-t),this._y-=.1*(this._y-i),this.x=Math.round(this._x),this.y=Math.round(this._y),this.x-=EXP.engine.width/2,this.y-=EXP.engine.height/2}else this.target instanceof Object&&(this._x-=.1*(this._x-(this.target.x+this.target.width/2)),this._y-=.1*(this._y-(this.target.y+this.target.width/2)),this.x=Math.round(this._x),this.y=Math.round(this._y),this.x-=EXP.engine.width/2,this.y-=EXP.engine.height/2);else this.x=Math.round(this._x),this.y=Math.round(this._y)},t.follow=function(t){void 0!==t&&"object"==typeof t&&(this.target=t)},t.unfollow=function(){this.target=null},t.setPosition=function(t,i){this._x=t,this._y=i,this.target=null,this.focus=null},t.shake=function(i,h){var s=h||10,e=20*i||20,a=setInterval(function(){console.log("shake"),t._x=Math.round(Math.random()*s-s/2),t._y=Math.round(Math.random()*s-s/2),e<=0&&(clearInterval(a),t._x=0,t._y=0),e--},50)},t.focus=function(t,i){void 0!==t&&"object"==typeof t&&(this.focusTarget=t),void 0!==i&&"number"==typeof i&&i>-1&&(this.focusDelay=30*i)},t});