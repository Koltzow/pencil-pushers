var Touch={enabled:!1,radius:10,threshold:20,pos:{start:null,move:null},dir:{x:0,y:0},joystick:null,boost:null,listeners:[]};Horizon.touch=Touch,Touch.start=function(t){for(var i=0;i<t.touches.length;i++)t.touches[i].clientX>window.innerWidth/2?this.boost=i:this.joystick=i;null!==this.joystick&&(this.pos.start={x:t.touches[this.joystick].clientX,y:t.touches[this.joystick].clientY})},Touch.move=function(t){this.pos.move={x:t.touches[0].clientX,y:t.touches[0].clientY},this.dir.x=0,this.dir.y=0;var i=this.pos.move.x-this.pos.start.x,n=this.pos.move.y-this.pos.start.y;i<this.threshold&&i>-this.threshold&&n<this.threshold&&n>-this.threshold||(angle=Math.atan2(-1,0)-Math.atan2(n,i),angle=360*-angle/(2*Math.PI),angle=angle<0?angle+360:angle,angle<22.5||angle>=337.5?this.dir.y=-1:angle<67.5&&angle>=22.5?(this.dir.x=1,this.dir.y=-1):angle<112.5&&angle>=67.5?this.dir.x=1:angle<157.5&&angle>=112.5?(this.dir.x=1,this.dir.y=1):angle<202.5&&angle>=157.5?this.dir.y=1:angle<247.5&&angle>=202.5?(this.dir.x=-1,this.dir.y=1):angle<292.5&&angle>=247.5?this.dir.x=-1:angle<337.5&&angle>=292.5&&(this.dir.x=-1,this.dir.y=-1))},Touch.end=function(t){null!==this.pos.start&&null===this.pos.move&&console.log("click"),this.pos.start=null,this.pos.move=null,this.dir={x:0,y:0}},Touch.render=function(){null!==this.pos.start&&(Engine.ctx.beginPath(),Engine.ctx.arc(this.pos.start.x,this.pos.start.y,40,0,2*Math.PI,!1),Engine.ctx.lineWidth=2,Engine.ctx.strokeStyle="white",Engine.ctx.stroke()),null!==this.pos.move&&(Engine.ctx.beginPath(),Engine.ctx.arc(this.pos.move.x,this.pos.move.y,20,0,2*Math.PI,!1),Engine.ctx.fillStyle="rgba(255,255,255,0.5)",Engine.ctx.fill())},Touch.addClickListener=function(t,i,n){},document.addEventListener("touchstart",Touch.start.bind(Touch)),document.addEventListener("touchmove",Touch.move.bind(Touch)),document.addEventListener("touchend",Touch.end.bind(Touch)),void 0!==screen.orientation&&(Touch.enabled=!0);