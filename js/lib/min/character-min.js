var Character={};Horizon.character=Character,Character.create=function(i){i=i||{};var t={};return t.controllable=i.controllable||!1,t.id="player",t.x=i.x||0,t.y=i.y||0,t.health=50,t.maxHealth=100,t.speed=10,t.width=i.width||32,t.height=i.height||32,t.dir=[0,1],t.tilesheet=new Image,t.tilesheet.src="images/tilesheets/characters/default.png",t.animations={idle:{right:{x:0,y:0,f:1,s:1},down:{x:1,y:0,f:1,s:1},left:{x:2,y:0,f:1,s:1},up:{x:3,y:0,f:1,s:1}},walking:{right:{x:0,y:1,f:4,s:2},down:{x:0,y:3,f:4,s:2},left:{x:0,y:2,f:4,s:2},up:{x:0,y:4,f:4,s:2}}},t.currentAnimation=t.animations.idle.down,t.currentAnimationFrame=0,t.update=function(){this.controllable&&(Keyboard.isPressed("w")||Keyboard.isPressed("ArrowUp")?(this.y-=this.speed,this.dir.x=0,this.dir.y=-1,this.currentAnimation=this.animations.walking.up):Keyboard.isPressed("s")||Keyboard.isPressed("ArrowDown")?(this.y+=this.speed,this.dir.x=0,this.dir.y=1,this.currentAnimation=this.animations.walking.down):Keyboard.isPressed("a")||Keyboard.isPressed("ArrowLeft")?(this.x-=this.speed,this.dir.y=0,this.dir.x=-1,this.currentAnimation=this.animations.walking.left):Keyboard.isPressed("d")||Keyboard.isPressed("ArrowRight")?(this.x+=this.speed,this.dir.y=0,this.dir.x=1,this.currentAnimation=this.animations.walking.right):this.dir.x>0?this.currentAnimation=this.animations.idle.right:this.dir.x<0?this.currentAnimation=this.animations.idle.left:this.dir.y<0?this.currentAnimation=this.animations.idle.up:this.dir.y>0&&(this.currentAnimation=this.animations.idle.down)),this.currentAnimationFrame+=1/this.currentAnimation.s,this.currentAnimationFrame>=this.currentAnimation.f&&(this.currentAnimationFrame=0);for(var i=0;i<Engine.bodies.length;i++)Engine.bodies[i]!==this&&Collision.test(this,Engine.bodies[i])&&void 0!==Engine.bodies[i].activate&&Engine.bodies[i].activate(this);Horizon.ui.healthbar.target=this.health/this.maxHealth},t.render=function(i,t,e){i.drawImage(this.tilesheet,(this.currentAnimation.x+Math.floor(this.currentAnimationFrame))*this.width,this.currentAnimation.y*this.height,this.width,this.height,Math.round(this.x+t/2-this.width/2-Camera.x),Math.round(this.y+e/2-this.height/2-Camera.y),2*this.width,2*this.height)},t};