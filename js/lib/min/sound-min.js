define(function(){var s={sounds:[],soundsPlaying:[]};s.play=function(s,n){for(var o=this,n=n||{},i=null,d=0;d<this.sounds.length;d++)this.sounds[d].id!==s||(i=this.sounds[d]);if(null!==i&&i.loaded){var t=new Audio;t.volume=n.volume||1;var u=n.loop||0,a=0;-1===u?t.loop=!0:u>1?t.addEventListener("ended",function(){o.remove(i.id),u-1>a&&(this.currentTime=0,this.play(),o.soundsPlaying.push({id:i.id,audio:this}),a++)},!1):t.addEventListener("ended",function(){o.remove(i.id)},!1),t.src=i.src,t.play(),this.soundsPlaying.push({id:i.id,audio:t})}},s.stop=function(s){for(var n=0;n<this.soundsPlaying.length;n++)if(this.soundsPlaying[n].id===s){this.soundsPlaying[n].audio.pause(),this.soundsPlaying.splice(n,1);break}},s.remove=function(s){for(var n=0;n<this.soundsPlaying.length;n++)if(this.soundsPlaying[n].id===s){this.soundsPlaying.splice(n,1);break}},s.load=function(s){for(var n=this,o=0;o<s.length;o++){var i=s[o];void 0!==i.id&&void 0!==i.src&&!function(){var s={id:i.id,src:i.src,loaded:!1};n.sounds.push(s);var o=new Audio;o.addEventListener("canplaythrough",function(){s.loaded=!0},!1),o.src=i.src}()}};var n=[{id:"footsteps",src:"sounds/footsteps2.mp3"},{id:"portal",src:"sounds/portal.ogg"},{id:"health",src:"sounds/health.ogg"},{id:"menu",src:"sounds/menu.ogg"},{id:"jpstart",src:"sounds/jpstart.ogg"},{id:"jpland",src:"sounds/jpland.ogg"},{id:"jpempty",src:"sounds/jpempty.mp3"},{id:"jpboost",src:"sounds/jpboost.wav"}];return s.load(n),s});