define(function(){var s={pressedKeys:[],dir:{x:0,y:0}};return s.keydown=function(s){this.pressedKeys[s.key]=!0,this.pressedKeys[s.code]=!0,this.pressedKeys[s.keyCode]=!0,this.dir.x=0,this.dir.y=0,(this.isPressed("w")||this.isPressed("W")||this.isPressed("ArrowUp"))&&(this.dir.y-=1),(this.isPressed("s")||this.isPressed("S")||this.isPressed("ArrowDown"))&&(this.dir.y+=1),(this.isPressed("a")||this.isPressed("A")||this.isPressed("ArrowLeft"))&&(this.dir.x-=1),(this.isPressed("d")||this.isPressed("D")||this.isPressed("ArrowRight"))&&(this.dir.x+=1)},s.keyup=function(s){this.pressedKeys[s.key]=!1,this.pressedKeys[s.code]=!1,this.pressedKeys[s.keyCode]=!1,this.dir.x=0,this.dir.y=0,(this.isPressed("w")||this.isPressed("W")||this.isPressed("ArrowUp"))&&(this.dir.y-=1),(this.isPressed("s")||this.isPressed("S")||this.isPressed("ArrowDown"))&&(this.dir.y+=1),(this.isPressed("a")||this.isPressed("A")||this.isPressed("ArrowLeft"))&&(this.dir.x-=1),(this.isPressed("d")||this.isPressed("D")||this.isPressed("ArrowRight"))&&(this.dir.x+=1)},s.isPressed=function(s){return!!this.pressedKeys[s]},s.addKeyPressListener=function(s,e){document.addEventListener("keydown",function(i){i.keyCode!==s&&i.key!==s||e(i)})},document.addEventListener("keydown",s.keydown.bind(s)),document.addEventListener("keyup",s.keyup.bind(s)),s});