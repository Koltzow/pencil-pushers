define(function(){var t={supported:"getGamepads"in navigator,connected:!1,buttons:[],sticks:[],dir:{x:0,y:0},interval:null};if(t.update=function(){this.dir.x=0,navigator.getGamepads()[0]?(this.connected=!0,this.buttons=navigator.getGamepads()[0].buttons,this.sticks=navigator.getGamepads()[0].axes,this.sticks.length>0&&(this.dir.x=Math.round(this.sticks[0]),this.dir.y=Math.round(this.sticks[1])),this.buttons[9].pressed&&(Engine.stopped||Engine.stop())):this.disconnect()},t.connect=function(){console.log("GAMEPAD: Connected"),this.connected=!0},t.disconnect=function(){console.log("GAMEPAD: Disconnected"),this.connected=!1,this.buttons=[],this.sticks=[],window.clearInterval(this.interval)},t.supported){window.addEventListener("gamepadconnected",t.connect.bind(t)),window.addEventListener("gamepaddisconnected",t.disconnect.bind(t));var n=10,e=0,s=window.setInterval(function(){e>=n?window.clearInterval(s):(navigator.getGamepads()[0]&&(t.connected||(t.connect(),t.buttons=navigator.getGamepads()[0].buttons,t.sticks=navigator.getGamepads()[0].axes,window.clearInterval(s))),e++)},100)}return t});